<!doctype html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="dist/output.css" rel="stylesheet">
    <title>Pixels</title>
</head>

<body>
    <div class="grid place-items-center h-screen">
        <div>
            <textarea
                id="input"
                class="bg-slate-700 p-2 w-full font-mono whitespace-pre-wrap h-max"
                oninput="render()"
                default="Type in this box.">1, 0, #ff0000
3, 0, #ff0000
0, 1, #ff0000
2, 1, #ff0000
4, 1, #ff0000
0, 2, #ff0000
4, 2, #ff0000
1, 3, #ff0000
3, 3, #ff0000
2, 4, #ff0000</textarea>
            <canvas id="myCanvas" style="border:1px solid #d3d3d3;">
        </div>
    </div>

    <script>
        function render() {
            const res = 64
            const { value } = document.getElementById('input');

            const Canvas = document.getElementById("myCanvas");
            const ctx = Canvas.getContext("2d");

            let lines = value.split(/\r\n|\n/)
            const data = lines.map(line => line.replace(/\s/g, '').split(','))

            ctx.canvas.width = ctx.canvas.height = 5 * res;

            data.forEach(([x, y, col]) => {
                ctx.fillStyle = col
                ctx.fillRect(x * res, y * res, res, res);
            });
        }
        window.onload = render;
    </script>
</body>

</html>